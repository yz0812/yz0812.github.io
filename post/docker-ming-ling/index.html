<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
<title>Docker命令 - yz</title>
<meta name="description" content="少年拥有了时间,时间带走了年少" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<link type="text/css" rel="stylesheet" href="https://yz0812.github.io/styles/main.css" media="screen" />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css" integrity="sha512-FwY1WVsm4UQgrOXt6kaQ53w83cOHa8fSvjFn/BvVOCYVPmkSR39k/xnU+8hht3zW6JL1TBd4C/aVQIAV58Cg6A==" crossorigin="anonymous" /> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/atom-one-dark.min.css" integrity="sha512-Jlyabam8ztU2kOGN19fSzv1Go9nt9A43UA6vhmL1MPsQMeoPZd+p7pbmegAtyl8kulna0Cqwb7Pgj4adGTLCXA==" crossorigin="anonymous" />
<script type="text/javascript" src="https://yz0812.github.io/media/scripts/jquery.js"></script>
<!-- <script type="text/javascript" src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js" integrity="sha512-tHQeqtcNWlZtEh8As/4MmZ5qpy0wj04svWFK7MIzLmUVIzaHXS8eod9OmHxyBL1UET5Rchvw7Ih4ZDv5JojZww==" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-7JNCPNX91Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-7JNCPNX91Z');
</script>


<script>
  hljs.initHighlightingOnLoad();
</script>

</head>

<body>
  <div class="layout">
    <div class="layout-header">

	<div class="layout-header-main">
		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">

					<div class="navbar">

						<div class="logo">
							<a href="https://yz0812.github.io">
								<img class="logo" src="https://yz0812.github.io/media/images/site_avatar.png?v=1770995982259"
									alt="">
							</a>
						</div>

						<div class="menu d-md-inline-block d-none">
							<ul class="layout-navigation-list">
								
								<li class="layout-navigation-item"><a title="归档"
										href="/archives">归档</a>
								</li>
								
								<li class="layout-navigation-item"><a title="标签"
										href="/tags">标签</a>
								</li>
								
								<li class="layout-navigation-item"><a title="关于"
										href="/post/about">关于</a>
								</li>
								
							</ul>
						</div>

						

						<div class="nav d-md-none d-inline-block">
							<div class="trigger">
								<i class="fa fa-bars layout-btn-toggle" aria-hidden="true"></i>
							</div>
						</div>

					</div>

				</div>
			</div>




		</div>
	</div>

</div>
    <div class="layout-collapse d-md-none">
	<div class="layout-collapse-main">
		<ul class="layout-collapse-list">
			
			<li class="layout-collapse-item"><a title="归档" href="/archives">归档</a></li>
			
			<li class="layout-collapse-item"><a title="标签" href="/tags">标签</a></li>
			
			<li class="layout-collapse-item"><a title="关于" href="/post/about">关于</a></li>
			

		</ul>
	</div>
</div>

    <div class="layout-content">
      <div class="layout-content-main">
        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div class="layout-post">
                <div class="layout-post-body">
                  <div class="row">

                    <div class="col-12 col-lg-10">
                      <div class="layout-post-main m-right m-md-right">
                        <div class="layout-post-header">
                          <h1 class="layout-post-title">Docker命令</h1>
                          <div class="layout-post-meta">
                            <div class="item">
                               <a href="https://yz0812.github.io/tag/docker/" class="post--keyword"
                                data-title="docker" data-type="post_tag" data-term-id="39">docker</a>
                              
                            </div>
                            <div class="item">
                              <span>2023-05-28</span>
                            </div>
                          </div>
                        </div>
                        <div class="layout-post-content">
                          <div class="layout-post-item">
                            
                            <p class="with-img"><img src="https://fastly.jsdelivr.net/gh/yz0812/mypic@master/img/70.jpg"
                                class="attachment-full size-full wp-post-image" alt="Docker命令" /></p>
                            
                            <h1 id="docker命令">Docker命令</h1>
<p><strong>容器命令</strong></p>
<ul>
<li><code>docker attach</code>：连接到正在运行的容器。</li>
<li><code>docker create</code>：创建一个新的容器但不启动它。</li>
<li><code>docker cp</code>：在容器和主机之间复制文件和文件夹。</li>
<li><code>docker diff</code>：显示容器文件系统中的更改。</li>
<li><code>docker exec</code>：在正在运行的容器中执行新命令。</li>
<li><code>docker export</code>：将容器的文件系统导出为 tar 归档文件。</li>
<li><code>docker inspect</code>：显示有关 Docker 对象（容器、镜像、网络等）的详细信息。</li>
<li><code>docker kill</code>：终止正在运行的容器。</li>
<li><code>docker logs</code>：获取容器的日志。</li>
<li><code>docker pause</code>：暂停一个正在运行的容器。</li>
<li><code>docker port</code>：显示容器的公开端口。</li>
<li><code>docker ps</code>：列出正在运行的容器。</li>
<li><code>docker restart</code>：重启容器。</li>
<li><code>docker rm</code>：删除一个或多个容器。</li>
<li><code>docker start</code>：启动一个或多个已经创建的容器。</li>
<li><code>dockerstop</code>：停止一个或多个正在运行的容器。</li>
<li><code>docker top</code>：显示容器中正在运行的进程。</li>
<li><code>docker unpause</code>：恢复暂停的容器。</li>
<li><code>docker update</code>：更新容器配置。</li>
<li><code>docker wait</code>：阻塞直到容器停止。</li>
</ul>
<p>** 镜像命令**</p>
<ul>
<li><code>docker build</code>：从 Dockerfile 构建镜像。</li>
<li><code>docker commit</code>：从容器创建一个新的镜像。</li>
<li><code>docker history</code>：显示镜像的历史记录。</li>
<li><code>docker images</code>：列出本地镜像。</li>
<li><code>docker import</code>：从归档文件或 URL 创建镜像。</li>
<li><code>docker load</code>：从归档文件中加载镜像。</li>
<li><code>docker pull</code>：从 Docker Hub 或其他 Docker Registry 拉取镜像。</li>
<li><code>docker push</code>：将本地镜像推送到 Docker Hub 或其他 Docker Registry。</li>
<li><code>docker rmi</code>：删除一个或多个镜像。</li>
<li><code>docker save</code>：将镜像保存为归档文件。</li>
<li><code>docker tag</code>：为镜像添加标签。</li>
</ul>
<p>** 网络命令**</p>
<ul>
<li><code>docker network</code>：管理 Docker 网络。</li>
</ul>
<p>** Swarm 命令**</p>
<ul>
<li><code>docker node</code>：管理 Docker 集群节点。</li>
<li><code>docker service</code>：管理 Docker Swarm 服务。</li>
<li><code>docker swarm</code>：管理 Docker Swarm。</li>
</ul>
<p>** 系统命令**</p>
<ul>
<li><code>docker info</code>：显示 Docker 系统信息。</li>
<li><code>docker login</code>：登录到 Docker Hub 或其他 Docker Registry。</li>
<li><code>docker logout</code>：从 Docker Hub 或其他 Docker Registry 注销。</li>
<li><code>docker system</code>：管理 Docker 系统。</li>
<li><code>docker version</code>：显示 Docker 版本信息。</li>
</ul>
<h1 id="docker-compose文件">docker compose文件</h1>
<ul>
<li><code>version</code>：指定 Compose 文件的版本。当前支持的版本为 2.x、3.x、3.1、3.2、3.3 等。</li>
<li><code>services</code>：定义要运行的服务，可以是一个或多个服务。</li>
<li><code>networks</code>：定义要使用的网络，可以是一个或多个网络。</li>
<li><code>volumes</code>：定义要使用的卷，可以是一个或多个卷。</li>
</ul>
<p>除了上述参数外，Docker Compose 文件还支持其他参数，如 <code>environment</code>、<code>ports</code>、<code>depends_on</code>、<code>restart</code>、<code>image</code>、<code>command</code>、<code>volumes</code>、<code>networks</code> 等。这些参数的作用如下：</p>
<ul>
<li><code>environment</code>：设置环境变量，可以是一个列表或一个字典。</li>
<li><code>ports</code>：将容器端口映射到主机端口。</li>
<li><code>depends_on</code>：定义服务之间的依赖关系，以便在启动依赖服务之前启动当前服务。</li>
<li><code>restart</code>：定义容器失败时的重启策略。</li>
<li><code>image</code>：使用的镜像名称和标签。</li>
<li><code>command</code>：在容器中运行的命令，可以覆盖 Dockerfile 中的 <code>CMD</code>。</li>
<li><code>volumes</code>：将主机路径或命名卷挂载到容器中。</li>
<li><code>networks</code>：将服务添加到指定的网络中。</li>
</ul>
<p>除了上述参数外，Docker Compose 文件还支持其他参数，如 <code>network_mode</code>、<code>container_name</code>、<code>links</code>、<code>user</code>、<code>working_dir</code>、<code>entrypoint</code> 等。这些参数的作用如下：</p>
<ul>
<li><code>network_mode</code>：指定容器要使用的网络模式。</li>
<li><code>container_name</code>：指定容器的名称。</li>
<li><code>links</code>：链接到其他服务。</li>
<li><code>user</code>：设置容器中运行进程的用户。</li>
<li><code>working_dir</code>：设置容器工作目录。</li>
<li><code>entrypoint</code>：覆盖 Dockerfile 中的 <code>ENTRYPOINT</code>。</li>
</ul>
<p>Docker Compose 文件还支持通过环境变量文件或命令行参数覆盖 Compose 文件中的参数。例如，可以使用 <code>-f</code> 参数指定 Compose 文件的路径，使用 <code>--project-name</code> 参数指定项目名称，使用 <code>--env-file</code> 参数指定环境变量文件的路径等。</p>
<h1 id="1-env环境变量">1 .env环境变量</h1>
<h2 id="11-定义">1.1 定义</h2>
<blockquote>
<p>在使用 Docker 构建和运行容器时，可以通过使用 <code>.env</code> 文件来设置环境变量和配置参数。<code>.env</code> 文件是一个文本文件，其中包含变量和其对应的值，每行一个变量，格式为 <code>VAR_NAME=VAR_VALUE</code>。</p>
<p>在 Dockerfile 中，可以使用 <code>ENV</code> 命令来设置环境变量，但如果使用 <code>.env</code> 文件，则可以在 Dockerfile 中使用 <code>${VAR_NAME}</code> 的语法来引用变量，例如：</p>
</blockquote>
<pre><code class="language-properties">VAR_NAME=${VAR_NAME}
</code></pre>
<blockquote>
<p>在 Docker Compose 配置文件中，也可以使用 <code>${VAR_NAME}</code> 的语法来引用 <code>.env</code> 文件中的变量。例如：</p>
</blockquote>
<pre><code class="language-yml">version: '3'
services:
  web:
    image: nginx
    environment:
      MY_VAR: ${VAR_NAME}
</code></pre>
<h2 id="12-使用">1.2 使用</h2>
<pre><code class="language-shell"># 构建镜像
docker compose --env-file .env up -d
# .env 文件中的变量仅在构建和运行Docker 容器时才会生效 
# 可以在容器启动命令中使用 -e 参数来将其传递给容器
docker run -e MY_VAR=${VAR_NAME} myimage
# 查看环境变量的引用
docker-compose --env-file ../.env config
</code></pre>
<h1 id="2-docker-compose-up">2. docker compose up</h1>
<h2 id="21-参数">2.1 参数</h2>
<ul>
<li><code>-d</code>：在后台模式下启动容器。</li>
<li><code>--no-color</code>：禁用输出的颜色。</li>
<li><code>--quiet-pull</code>：禁止输出拉取镜像的详细信息。</li>
<li><code>--no-deps</code>：不启动服务依赖的服务。</li>
<li><code>--force-recreate</code>：强制重新创建容器，即使容器已经存在。</li>
<li><code>--always-recreate-deps</code>：重新创建所有服务依赖的容器。</li>
<li><code>--no-recreate</code>：不重新创建容器，即使容器已经存在。</li>
<li><code>--no-build</code>：不构建镜像，直接使用已有的镜像。</li>
<li><code>--build</code>：在启动容器之前构建镜像。</li>
<li><code>--abort-on-container-exit</code>：当容器退出时，停止所有容器的运行。</li>
<li><code>--attach-dependencies</code>：在启动容器之前启动所有服务依赖的服务。</li>
<li><code>--remove-orphans</code>：移除无关的容器，即没有被 Compose 文件中定义的服务所依赖的容器。</li>
<li><code>--timeout TIMEOUT</code>：设置容器启动的超时时间，默认为 10 秒。</li>
<li><code>--renew-anon-volumes</code>：在启动容器之前删除匿名卷，并重新创建它们。</li>
<li><code>--remove-volumes</code>：在移除容器时同时移除关联的匿名和命名卷。</li>
<li><code>--volumes</code>：在容器之间共享命名卷。</li>
<li><code>--scale SERVICE=NUM</code>：指定要启动的服务以及要启动的容器数量，例如 <code>--scale web=2</code> 表示启动 <code>web</code> 服务的 2 个容器。</li>
<li><code>--no-log-prefix</code>：不在日志中输出服务名称的前缀。</li>
<li><code>--log-level LEVEL</code>：设置日志的级别，默认为 <code>info</code>。</li>
<li><code>--exit-code-from SERVICE</code>：从指定的服务获取退出代码，并在所有容器停止时退出。</li>
<li><code>--disable-content-trust</code>：禁用 Docker Content Trust。</li>
<li><code>--pull</code>：在启动容器之前拉取最新的镜像。</li>
<li><code>--no-healthcheck</code>：不运行健康检查。</li>
<li><code>--compose-file FILE</code>：指定要使用的 Compose 文件，可以指定多个文件。</li>
<li><code>--project-namePROJECT_NAME</code>：指定 Compose 项目的名称。</li>
<li><code>-f, --file FILE</code>：指定要使用的 Compose 文件，可以指定多个文件。</li>
<li><code>--env-file PATH</code>：指定要使用的环境变量文件。</li>
<li><code>--env, -e KEY=VALUE</code>：设置环境变量，可以指定多个。</li>
<li><code>--no-recreate</code>：不重新创建容器，即使容器已经存在。</li>
<li><code>--no-start</code>：不启动容器，只构建镜像。</li>
<li><code>--scale SERVICE=NUM</code>：指定要启动的服务以及要启动的容器数量，例如 <code>--scale web=2</code> 表示启动 <code>web</code> 服务的 2 个容器。</li>
<li><code>--remove-orphans</code>：移除无关的容器，即没有被 Compose 文件中定义的服务所依赖的容器。</li>
<li><code>--no-build</code>：不构建镜像，直接使用已有的镜像。</li>
<li><code>--build</code>：在启动容器之前构建镜像。</li>
<li><code>--always-recreate-deps</code>：重新创建所有服务依赖的容器。</li>
<li><code>--force-recreate</code>：强制重新创建容器，即使容器已经存在。</li>
<li><code>--no-deps</code>：不启动服务依赖的服务。</li>
<li><code>--abort-on-container-exit</code>：当容器退出时，停止所有容器的运行。</li>
<li><code>--attach-dependencies</code>：在启动容器之前启动所有服务依赖的服务。</li>
<li><code>--remove-orphans</code>：移除无关的容器，即没有被 Compose 文件中定义的服务所依赖的容器。</li>
<li><code>--timeout TIMEOUT</code>：设置容器启动的超时时间，默认为 10 秒。</li>
<li><code>--renew-anon-volumes</code>：在启动容器之前删除匿名卷，并重新创建它们。</li>
<li><code>--remove-volumes</code>：在移除容器时同时移除关联的匿名和命名卷。</li>
<li><code>--volumes</code>：在容器之间共享命名卷。</li>
<li><code>--no-log-prefix</code>：不在日志中输出服务名称的前缀。</li>
<li><code>--log-level LEVEL</code>：设置日志的级别，默认为 <code>info</code>。</li>
<li><code>--exit-code-from SERVICE</code>：从指定的服务获取退出代码，并在所有容器停止时退出。</li>
<li><code>--disable-content-trust</code>：禁用 Docker Content Trust。</li>
</ul>
<h2 id="22-举例">2.2 举例</h2>
<pre><code class="language-shell"># 指定一个镜像
docker compose up -d redis
# 指定环境变量
docker-compose --env-file ../.env up -d
# 重新创建容器，即使容器已经存在。
docker compose up   --force-recreate -d
# 构建镜像并启动容器。
docker-compose up --build
# 指定使用的 Compose 文件，默认文件名为 docker-compose.yml。
docker-compose -f filename.yml up
# 指定项目名称。
docker-compose -p projectname up
# 如果一个容器退出，则停止所有容器。
docker-compose up --abort-on-container-exit

</code></pre>
<h1 id="3docker-logs">3.docker logs</h1>
<h2 id="31参数">3.1参数</h2>
<ul>
<li><code>-f</code>：实时输出日志，类似于 <code>tail -f</code> 命令。</li>
<li><code>--tail NUM</code>：仅输出最后 NUM 行的日志，默认为全部输出。</li>
<li><code>--since TIME</code>：仅输出从指定时间点开始的日志，例如 <code>2022-05-01T00:00:00</code>。</li>
<li><code>--until TIME</code>：仅输出到指定时间点为止的日志，例如 <code>2022-05-01T23:59:59</code>。</li>
<li><code>--details</code>：输出更多的容器详细信息，例如容器的标签、ID、名称等。</li>
<li><code>--timestamps</code>：在日志中显示时间戳。</li>
<li><code>--follow</code> 或 <code>-f</code>：在输出日志后保持连接，实时查看容器日志的变化。</li>
<li><code>--tail</code> 或 <code>-n</code>：指定输出日志的行数。</li>
<li><code>--since</code>：指定输出日志的起始时间。</li>
</ul>
<h2 id="32-举例">3.2 举例</h2>
<h3 id="321-查看容器的所有日志">3.2.1 查看容器的所有日志：</h3>
<pre><code class="language-shell">docker logs &lt;container_id&gt;
</code></pre>
<h3 id="322-查看容器的最后-100-行日志">3.2.2 查看容器的最后 100 行日志：</h3>
<pre><code class="language-shell">docker logs --tail 100 &lt;container_id&gt;
</code></pre>
<h3 id="323-查看容器的实时日志">3.2.3 查看容器的实时日志：</h3>
<pre><code class="language-shell">docker logs &lt;container_id&gt; 2&gt;&amp;1 | grep &quot;error&quot;
</code></pre>
<h3 id="324-查看容器的所有日志并在其中搜索关键字-error">3.2.4 查看容器的所有日志，并在其中搜索关键字 <code>error</code>：</h3>
<pre><code class="language-shell">docker logs -f &lt;container_id&gt;
</code></pre>
<h3 id="325-查看容器的最后-100-行日志并在其中搜索关键字-error">3.2.5 查看容器的最后 100 行日志，并在其中搜索关键字 <code>error</code>：</h3>
<pre><code class="language-shell">docker logs --tail 100 &lt;container_id&gt; 2&gt;&amp;1 | grep &quot;error&quot;
</code></pre>
<h3 id="326-查看容器的实时日志并在其中搜索关键字-error">3.2.6 查看容器的实时日志，并在其中搜索关键字 <code>error</code>：：</h3>
<pre><code class="language-shell">docker logs -f &lt;container_id&gt; 2&gt;&amp;1 | grep &quot;error&quot;
</code></pre>
<h1 id="4docker-inspect">4.Docker Inspect</h1>
<p><code>docker inspect</code> 命令用于获取 Docker 对象（容器、镜像、网络等）</p>
<h2 id="41-参数">4.1 参数</h2>
<ul>
<li><code>--format</code>: 指定输出的格式。</li>
<li><code>--type</code>: 指定要检查的对象类型。</li>
<li><code>--size</code>: 显示对象占用的磁盘空间大小。</li>
<li><code>--all</code>: 显示所有对象的详细信息。</li>
<li><code>--verbose</code>: 显示更详细的信息。</li>
<li><code>--pretty</code>: 显示格式化的输出。</li>
<li><code>--no-trunc</code>: 显示完整的输出，而不是截断后的输出。</li>
<li><code>--help</code>: 显示帮助信息。</li>
</ul>
<h2 id="42-举例">4.2 举例</h2>
<h3 id="421-检查容器的详细信息">4.2.1 检查容器的详细信息：</h3>
<pre><code class="language-shell">docker inspect  &lt;container_id&gt; 
</code></pre>
<h3 id="422-检查容器-ip-地址">4.2.2 检查容器 IP 地址：</h3>
<pre><code class="language-shell">docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'  &lt;container_id&gt; 
</code></pre>
<h3 id="423-检查镜像信息">4.2.3 检查镜像信息：</h3>
<pre><code class="language-shell">docker inspect &lt;image_id&gt; 
</code></pre>
<h3 id="424-检查网络信息">4.2.4 检查网络信息：</h3>
<pre><code class="language-shell">docker inspect &lt;network_name&gt;
</code></pre>
<h3 id="425-指定输出格式">4.2.5 指定输出格式：</h3>
<pre><code class="language-shell">docker inspect --format='{{.Name}} - {{.State.Status}}' &lt;container_id&gt; 
</code></pre>
<h3 id="426-按条件筛选容器">4.2.6 按条件筛选容器：</h3>
<pre><code class="language-shell">docker inspect -f '{{.Name}} {{.State.Running}}' $(docker ps -q --filter &quot;status=running&quot;)
</code></pre>
<h3 id="427-按条件筛选镜像">4.2.7 按条件筛选镜像：</h3>
<pre><code class="language-shell">docker inspect -f '{{.RepoTags}} {{.Size}}' $(docker images -q --filter &quot;dangling=true&quot;)
</code></pre>
<h3 id="428-使用jq格式化工具">4.2.8 使用jq格式化工具</h3>
<pre><code class="language-shell">docker inspect  &lt;container_id&gt;   | jq '.[0] | {id: .Id, created: .Created, author: .Author, size: .Size, labels: .Config.Labels}'
</code></pre>
<h3 id="429-查看目录挂载信息">4.2.9 查看目录挂载信息</h3>
<pre><code class="language-shell">docker inspect --format=&quot;{{json .Mounts}}&quot; &lt;container_id&gt; | jq
</code></pre>
<h3 id="4210-查看容器网络信息">4.2.10 查看容器网络信息</h3>
<pre><code class="language-shell">#查看完整网络信息
docker inspect --format=&quot;{{json .NetworkSettings}}&quot; &lt;container_id&gt; | jq
#查看网络端口映射
docker inspect --format=&quot;{{json .NetworkSettings.Ports}}&quot; &lt;container_id&gt; | jq
# 查看容器的网络ip、网关等信息
docker inspect --format=&quot;{{json .NetworkSettings.Networks}}&quot; &lt;container_id&gt; | jq

</code></pre>
<h3 id="4211-查看容器的端口映射">4.2.11 查看容器的端口映射：</h3>
<pre><code class="language-shell">docker inspect --format='{{json .HostConfig.PortBindings}}' mycontainer
</code></pre>
<h3 id="4212-查看容器的环境变量">4.2.12 查看容器的环境变量：</h3>
<pre><code class="language-shell">docker inspect --format='{{json .Config.Env}}' mycontainer
</code></pre>
<h3 id=""></h3>
<h1 id="5docker-exec">5.docker exec</h1>
<h2 id="51-参数">5.1 参数</h2>
<ul>
<li><code>-it</code>: 以交互模式进入容器中执行命令，通常用于需要交互式操作的命令。</li>
<li><code>-d</code>: 让容器在后台运行。</li>
<li><code>--user</code>: 指定要执行命令的用户。</li>
<li><code>--workdir</code>: 指定命令执行的工作目录。</li>
<li><code>--env</code>: 设置环境变量。</li>
<li><code>--privileged</code>: 让容器拥有特权，可以访问主机的设备和文件系统。</li>
<li><code>--name</code>: 指定容器的名称。</li>
<li><code>--detach-keys</code>: 指定在后台运行容器时使用的键盘序列。</li>
</ul>
<h2 id="52-举例">5.2 举例</h2>
<h3 id="521-进入正在运行的容器并执行命令">5.2.1 进入正在运行的容器并执行命令：</h3>
<pre><code class="language-shell">docker exec -it mycontainer sh
</code></pre>
<p>上面的命令将以交互模式进入名为 <code>mycontainer</code> 的容器，并在容器中执行 <code>sh</code> 命令。</p>
<h3 id="522-在后台运行容器并执行命令">5.2.2 在后台运行容器并执行命令：</h3>
<pre><code class="language-shell">docker exec -d mycontainer ls
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中运行 <code>ls</code> 命令，并让容器在后台运行。</p>
<h3 id="523-指定执行命令的用户">5.2.3 指定执行命令的用户：</h3>
<pre><code class="language-shell">docker exec --user=username mycontainer whoami
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中以 <code>username</code> 用户身份执行 <code>whoami</code> 命令。</p>
<h3 id="524-指定命令执行的工作目录">5.2.4 指定命令执行的工作目录：</h3>
<pre><code class="language-shell">docker exec --workdir=/app mycontainer ls
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中以 <code>/app</code> 目录作为工作目录执行 <code>ls</code> 命令。</p>
<h3 id="525-设置环境变量并执行命令">5.2.5 设置环境变量并执行命令：</h3>
<pre><code class="language-shell">docker exec --env MY_VAR=value mycontainer env
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中设置名为 <code>MY_VAR</code> 的环境变量为 <code>value</code>，并执行 <code>env</code> 命令。</p>
<h3 id="526-让容器拥有特权并执行命令">5.2.6 让容器拥有特权并执行命令：</h3>
<pre><code class="language-shell">docker exec --privileged mycontainer ls /dev
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中以特权模式运行 <code>ls /dev</code> 命令，可以访问主机的设备和文件系统。</p>
<h3 id="527-指定容器的名称并执行命令">5.2.7 指定容器的名称并执行命令：</h3>
<pre><code class="language-shell">docker exec --name=myexec mycontainer ls
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中执行 <code>ls</code> 命令，并将执行结果输出到名为 <code>myexec</code> 的容器中。</p>
<h3 id="528-指定在后台运行容器时使用的键盘序列">5.2.8 指定在后台运行容器时使用的键盘序列：</h3>
<pre><code class="language-shell">docker exec --detach-keys=&quot;ctrl-d&quot; mycontainer ls
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中运行 <code>ls</code> 命令，并在后台运行容器时使用 <code>ctrl-d</code> 键作为键盘序列。</p>
<h3 id="529-在容器中查看日志">5.2.9 在容器中查看日志：</h3>
<pre><code class="language-shell">docker exec -it mycontainer cat /var/log/mylog.log
</code></pre>
<h3 id="5210-查看容器内的进程">5.2.10 查看容器内的进程：</h3>
<pre><code class="language-shell">dockerexec -it mycontainer ps -ef
</code></pre>
<h1 id="6-docker-cp">6. docker cp</h1>
<h2 id="61-参数">6.1 参数</h2>
<ul>
<li><code>-a, --archive</code>: 以归档模式进行复制，包括复制文件的所有 uid/gid 信息。</li>
<li><code>--follow-link</code>: 始终跟随源路径中的符号链接。</li>
<li><code>--help</code>: 显示帮助信息。</li>
</ul>
<h2 id="62-举例">6.2 举例</h2>
<h3 id="621-从容器复制文件到主机">6.2.1. 从容器复制文件到主机：</h3>
<pre><code class="language-shell">docker cp mycontainer:/path/to/myfile.txt /host/path/
</code></pre>
<p>上面的命令将从名为 <code>mycontainer</code> 的容器中复制 <code>/path/to/myfile.txt</code> 文件到主机的 <code>/host/path/</code> 目录中。</p>
<h3 id="622-从主机复制文件到容器">6.2.2 从主机复制文件到容器：</h3>
<pre><code class="language-shell">docker cp /host/path/myfile.txt mycontainer:/path/to/
</code></pre>
<p>上面的命令将从主机的 <code>/host/path/myfile.txt</code> 文件复制到名为 <code>mycontainer</code> 的容器中的 <code>/path/to/</code> 目录中。</p>
<h3 id="623-使用-a-参数复制所有的文件属性">6.2.3 使用 <code>-a</code> 参数复制所有的文件属性：</h3>
<pre><code class="language-shell">docker cp -a mycontainer:/path/to/myfile.txt /host/path/
</code></pre>
<p>上面的命令将从名为 <code>mycontainer</code> 的容器中复制 <code>/path/to/myfile.txt</code> 文件到主机的 <code>/host/path/</code> 目录中，并保留文件的所有属性。</p>
<h3 id="624-使用-follow-link-参数跟随符号链接">6.2.4 使用 <code>-follow-link</code> 参数跟随符号链接：</h3>
<pre><code class="language-shell">docker cp --follow-link mycontainer:/path/to/mylink /host/path/
</code></pre>
<p>上面的命令将从名为 <code>mycontainer</code> 的容器中复制 <code>/path/to/mylink</code> 符号链接所指向的文件到主机的 <code>/host/path/</code> 目录中。</p>
<h3 id="625-使用-作为目标路径打印到标准输出">6.2.5 使用 <code>-</code> 作为目标路径打印到标准输出：</h3>
<pre><code class="language-shell">docker cp mycontainer:/path/to/myfile.txt -
</code></pre>
<p>上面的命令将从名为 <code>mycontainer</code> 的容器中读取 <code>/path/to/myfile.txt</code> 文件的内容，并输出到标准输出。</p>
<h3 id="626-从容器中复制整个目录">6.2.6 从容器中复制整个目录：</h3>
<pre><code class="language-shell">docker cp mycontainer:/path/to/mydir /host/path/
</code></pre>
<p>上面的命令将从名为 <code>mycontainer</code> 的容器中复制 <code>/path/to/mydir</code> 目录及其下的所有文件和子目录到主机的 <code>/host/path/</code> 目录中。</p>
<h3 id="627-在容器中创建新文件并复制">6.2.7 在容器中创建新文件并复制：</h3>
<pre><code class="language-shell">docker cp /host/path/myfile.txt mycontainer:/path/to/newfile.txt
</code></pre>
<p>上面的命令将在名为 <code>mycontainer</code> 的容器中创建名为 <code>/path/to/newfile.txt</code> 的新文件，并将主机中的 <code>/host/path/myfile.txt</code> 文件复制到新文件中。</p>
<p>这些是 <code>docker cp</code> 常用的参数和使用示例，可以根据具体的应用场景和需求，使用不同的参数和路径进行复制操作。</p>

                          </div>
                        </div>
                        <div class="layout-post-social">
                          <div class="item reader">
                            <div id="/post/docker-ming-ling/" class="leancloud-visitors view"
                              data-flag-title="Docker命令">
                              <span class="post-meta-item-text">阅读 </span>
                              <span class="leancloud-visitors-count"></span>
                            </div>
                          </div>
                        </div>

                        <div class="layout-post-navigation">
                          <div class="navigation-list">
                            
                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://yz0812.github.io/post/docker-compose-an-zhuang-gitlab-ee/" class="title">
                                      <h4>docker-compose安装gitlab-ee</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      
                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>上一篇</span></div>
                                  <div class="item">2023-06-11</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="https://yz0812.github.io/post/docker-compose-an-zhuang-gitlab-ee/"
                                    style="background-image: url('https://fastly.jsdelivr.net/gh/yz0812/mypic@master/img/71.jpg');"></a>
                                </div>
                              </div>
                              
                            </div>

                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://yz0812.github.io/post/javacv-shi-pin-liu-chou-zheng/" class="title">
                                      <h4>JavaCV 视频流抽帧</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      
                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>下一篇</span></div>
                                  <div class="item">2022-12-10</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="https://yz0812.github.io/post/javacv-shi-pin-liu-chou-zheng/"
                                    style="background-image: url('https://fastly.jsdelivr.net/gh/yz0812/mypic@master/img/69.jpg');"></a>
                                </div>
                              </div>
                              
                            </div>

                            
                          </div>
                        </div>

                        <div class="layout-comments" id="comments">
                          
                            
                        </div>
                      </div>
                    </div>

                    <div class="col-12 col-lg-2 d-none d-lg-block">
                      <div class="layout-post-sidebar">
                        <div class="layout-sidebar-item">
                          <ul class="markdownIt-TOC">
<li><a href="#docker%E5%91%BD%E4%BB%A4">Docker命令</a></li>
<li><a href="#docker-compose%E6%96%87%E4%BB%B6">docker compose文件</a></li>
<li><a href="#1-env%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">1 .env环境变量</a>
<ul>
<li><a href="#11-%E5%AE%9A%E4%B9%89">1.1 定义</a></li>
<li><a href="#12-%E4%BD%BF%E7%94%A8">1.2 使用</a></li>
</ul>
</li>
<li><a href="#2-docker-compose-up">2. docker compose up</a>
<ul>
<li><a href="#21-%E5%8F%82%E6%95%B0">2.1 参数</a></li>
<li><a href="#22-%E4%B8%BE%E4%BE%8B">2.2 举例</a></li>
</ul>
</li>
<li><a href="#3docker-logs">3.docker logs</a>
<ul>
<li><a href="#31%E5%8F%82%E6%95%B0">3.1参数</a></li>
<li><a href="#32-%E4%B8%BE%E4%BE%8B">3.2 举例</a>
<ul>
<li><a href="#321-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E6%89%80%E6%9C%89%E6%97%A5%E5%BF%97">3.2.1 查看容器的所有日志：</a></li>
<li><a href="#322-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9C%80%E5%90%8E-100-%E8%A1%8C%E6%97%A5%E5%BF%97">3.2.2 查看容器的最后 100 行日志：</a></li>
<li><a href="#323-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E5%AE%9E%E6%97%B6%E6%97%A5%E5%BF%97">3.2.3 查看容器的实时日志：</a></li>
<li><a href="#324-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E6%89%80%E6%9C%89%E6%97%A5%E5%BF%97%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97-error">3.2.4 查看容器的所有日志，并在其中搜索关键字 <code>error</code>：</a></li>
<li><a href="#325-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9C%80%E5%90%8E-100-%E8%A1%8C%E6%97%A5%E5%BF%97%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97-error">3.2.5 查看容器的最后 100 行日志，并在其中搜索关键字 <code>error</code>：</a></li>
<li><a href="#326-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E5%AE%9E%E6%97%B6%E6%97%A5%E5%BF%97%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97-error">3.2.6 查看容器的实时日志，并在其中搜索关键字 <code>error</code>：：</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4docker-inspect">4.Docker Inspect</a>
<ul>
<li><a href="#41-%E5%8F%82%E6%95%B0">4.1 参数</a></li>
<li><a href="#42-%E4%B8%BE%E4%BE%8B">4.2 举例</a>
<ul>
<li><a href="#421-%E6%A3%80%E6%9F%A5%E5%AE%B9%E5%99%A8%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">4.2.1 检查容器的详细信息：</a></li>
<li><a href="#422-%E6%A3%80%E6%9F%A5%E5%AE%B9%E5%99%A8-ip-%E5%9C%B0%E5%9D%80">4.2.2 检查容器 IP 地址：</a></li>
<li><a href="#423-%E6%A3%80%E6%9F%A5%E9%95%9C%E5%83%8F%E4%BF%A1%E6%81%AF">4.2.3 检查镜像信息：</a></li>
<li><a href="#424-%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF">4.2.4 检查网络信息：</a></li>
<li><a href="#425-%E6%8C%87%E5%AE%9A%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F">4.2.5 指定输出格式：</a></li>
<li><a href="#426-%E6%8C%89%E6%9D%A1%E4%BB%B6%E7%AD%9B%E9%80%89%E5%AE%B9%E5%99%A8">4.2.6 按条件筛选容器：</a></li>
<li><a href="#427-%E6%8C%89%E6%9D%A1%E4%BB%B6%E7%AD%9B%E9%80%89%E9%95%9C%E5%83%8F">4.2.7 按条件筛选镜像：</a></li>
<li><a href="#428-%E4%BD%BF%E7%94%A8jq%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B7%A5%E5%85%B7">4.2.8 使用jq格式化工具</a></li>
<li><a href="#429-%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E4%BF%A1%E6%81%AF">4.2.9 查看目录挂载信息</a></li>
<li><a href="#4210-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF">4.2.10 查看容器网络信息</a></li>
<li><a href="#4211-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84">4.2.11 查看容器的端口映射：</a></li>
<li><a href="#4212-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">4.2.12 查看容器的环境变量：</a></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5docker-exec">5.docker exec</a>
<ul>
<li><a href="#51-%E5%8F%82%E6%95%B0">5.1 参数</a></li>
<li><a href="#52-%E4%B8%BE%E4%BE%8B">5.2 举例</a>
<ul>
<li><a href="#521-%E8%BF%9B%E5%85%A5%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">5.2.1 进入正在运行的容器并执行命令：</a></li>
<li><a href="#522-%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">5.2.2 在后台运行容器并执行命令：</a></li>
<li><a href="#523-%E6%8C%87%E5%AE%9A%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84%E7%94%A8%E6%88%B7">5.2.3 指定执行命令的用户：</a></li>
<li><a href="#524-%E6%8C%87%E5%AE%9A%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95">5.2.4 指定命令执行的工作目录：</a></li>
<li><a href="#525-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">5.2.5 设置环境变量并执行命令：</a></li>
<li><a href="#526-%E8%AE%A9%E5%AE%B9%E5%99%A8%E6%8B%A5%E6%9C%89%E7%89%B9%E6%9D%83%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">5.2.6 让容器拥有特权并执行命令：</a></li>
<li><a href="#527-%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E7%9A%84%E5%90%8D%E7%A7%B0%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">5.2.7 指定容器的名称并执行命令：</a></li>
<li><a href="#528-%E6%8C%87%E5%AE%9A%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E6%97%B6%E4%BD%BF%E7%94%A8%E7%9A%84%E9%94%AE%E7%9B%98%E5%BA%8F%E5%88%97">5.2.8 指定在后台运行容器时使用的键盘序列：</a></li>
<li><a href="#529-%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97">5.2.9 在容器中查看日志：</a></li>
<li><a href="#5210-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%86%85%E7%9A%84%E8%BF%9B%E7%A8%8B">5.2.10 查看容器内的进程：</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-docker-cp">6. docker cp</a>
<ul>
<li><a href="#61-%E5%8F%82%E6%95%B0">6.1 参数</a></li>
<li><a href="#62-%E4%B8%BE%E4%BE%8B">6.2 举例</a>
<ul>
<li><a href="#621-%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%88%B0%E4%B8%BB%E6%9C%BA">6.2.1. 从容器复制文件到主机：</a></li>
<li><a href="#622-%E4%BB%8E%E4%B8%BB%E6%9C%BA%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%88%B0%E5%AE%B9%E5%99%A8">6.2.2 从主机复制文件到容器：</a></li>
<li><a href="#623-%E4%BD%BF%E7%94%A8-a-%E5%8F%82%E6%95%B0%E5%A4%8D%E5%88%B6%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7">6.2.3 使用 <code>-a</code> 参数复制所有的文件属性：</a></li>
<li><a href="#624-%E4%BD%BF%E7%94%A8-follow-link-%E5%8F%82%E6%95%B0%E8%B7%9F%E9%9A%8F%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5">6.2.4 使用 <code>-follow-link</code> 参数跟随符号链接：</a></li>
<li><a href="#625-%E4%BD%BF%E7%94%A8-%E4%BD%9C%E4%B8%BA%E7%9B%AE%E6%A0%87%E8%B7%AF%E5%BE%84%E6%89%93%E5%8D%B0%E5%88%B0%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA">6.2.5 使用 <code>-</code> 作为目标路径打印到标准输出：</a></li>
<li><a href="#626-%E4%BB%8E%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%A4%8D%E5%88%B6%E6%95%B4%E4%B8%AA%E7%9B%AE%E5%BD%95">6.2.6 从容器中复制整个目录：</a></li>
<li><a href="#627-%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E4%BB%B6%E5%B9%B6%E5%A4%8D%E5%88%B6">6.2.7 在容器中创建新文件并复制：</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layout-totop d-none"><i class="fa fa-angle-up" aria-hidden="true"></i></div>

    	<div class="layout-footer">

		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">
					<div class="footer">
						<div class="row">
							<div class="col-12 col-md-9">
								<div class="footer-copy">
									
									<span>© 2018-05-01 </span>
									<a href="https://yz0812.github.io" title="yz">yz</a>
									<span class="px-2">⋅</span>
									
									
									<div class="footer-icp d-none d-sm-inline-block">
										<span class="px-2">⋅</span>
										
									</div>
								</div>
							</div>
							<div class="col-sm-3 d-none d-md-block">
								<div class="footer-links">
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript" src='https://yz0812.github.io/media/scripts/main.js'></script>
	
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?1bcfcef443c3da9720b8bc3f63856c73";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
	

  </div>
</body>

</html>